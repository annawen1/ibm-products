import{p as V,j as n,c as v}from"./settings-CRrTVbgr.js";import{r as S,R as C}from"./index-CTjT7uj6.js";import{a as B}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{D as f,a as q,m as T,u as D}from"./_storybook-styles-i3iCgewe.js";import{D as z}from"./DatagridActions-hsLtu9vl.js";import{A as e}from"./getArgTypes-CUsKgYxs.js";import{S as J}from"./StoryDocsPage-Bt8tN_UY.js";import{c as N}from"./deprecate-BLSDO8J_.js";import{u as K}from"./useFocusRowExpander-BfDxXWCM.js";import{n as Q}from"./events-D0gen66i.js";import{u as X}from"./useSelectRows-BL8RvDfN.js";import{a as Z}from"./bucket-5--iEWWNCt.js";import{T as ee}from"./bucket-16-C5jbOqAN.js";import"./index-BU4hwJwl.js";import"./index-BRV0Se7Z.js";import"./index-DN5spsdJ.js";import"./v4-CQkTLCs1.js";import"./devtools-BECPDnEK.js";import"./TableRow-CfUWZmJ6.js";import"./wrapComponent-DuUaIn3s.js";import"./bucket-0-oY2tyfOj.js";import"./TableToolbar-issDisOB.js";import"./Text-CJa2B8Yb.js";import"./ErrorEmptyState-JVdmBFpY.js";import"./Link-B87RWa8F.js";import"./EmptyState-ziZ15FsL.js";import"./props-helper-CMbLuKX0.js";import"./EmptyStateV2-D0xS4Aff.js";import"./iframe-DBTVSOxk.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-BJJAi4cB.js";import"./uuidv4-BQrI85uz.js";import"./NoDataEmptyState-6owofLdA.js";import"./NoDataIllustration-Cbu5equv.js";import"./NotFoundEmptyState-BBqq9YRC.js";import"./NotFoundIllustration-CUxt5hHs.js";import"./useMultipleKeyTracking-CH9TKWYU.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-SLCf_n8R.js";import"./usePreviousValue-BqVTtLed.js";import"./useResizeObserver-BvbgZjpI.js";import"./index-fsmjFOXH.js";import"./useControllableState-B1slDU0H.js";import"./useAttachedMenu-TY58osux.js";import"./bucket-1-D9I7e5DL.js";import"./getFocusableElements-BW7cf991.js";import"./index-CJaoAHRt.js";import"./index-DshjxXYm.js";import"./useClickOutside-BabGwu55.js";import"./AccordionItem-C4NI2xLC.js";import"./Search-DsgRvTuS.js";import"./FormContext-D0sdIVRD.js";import"./bucket-13-DW3ggDVU.js";import"./index-JTvCgqhd.js";import"./LayerContext-BJwyboGm.js";import"./motionConstants-C62tzl7F.js";import"./tslib.es6-CI8bilKU.js";import"./index-DkUr2NOz.js";import"./ActionSet-B7TUuTqf.js";import"./ButtonSet-CltDhnub.js";import"./InlineLoading-BAXzw7Vs.js";import"./Checkbox-BIXmEu_U.js";import"./bucket-17-DCCQrBLC.js";import"./DatePicker-DKaYnu5B.js";import"./Dropdown-ClvEqLzO.js";import"./index-Dgpqnxx_.js";import"./index-DcAOwtUU.js";import"./mergeRefs-CTUecegF.js";import"./FormGroup-jYEYux68.js";import"./NumberInput-BAY_6XtC.js";import"./useNormalizedInputProps-DXf7f817.js";import"./bucket-14-CVMjmpSy.js";import"./RadioButton-e3vkHDFl.js";import"./RadioButtonGroup-5O28pTwM.js";import"./MultiSelect-BUG_YuIi.js";import"./index-CVMazV68.js";import"./toString-Cu7nsjnZ.js";import"./isSymbol-D87B3_a6.js";import"./FilterSummary-_0Q1hst9.js";import"./debounce-BaS29eSe.js";import"./toNumber-CpuPfuLu.js";import"./useWindowResize-CQvE3W8T.js";import"./TagSet-thr0-q_Q.js";import"./Tag-BhXbbo73.js";import"./ComposedModal-uB4X-JZy.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-ldDxJswA.js";import"./index-DASh2Ycj.js";import"./usePortalTarget-BYb2WbwP.js";import"./SkeletonText-Rz2pBgBx.js";import"./getNodeTextContent-C8IeKkUQ.js";import"./index-75KDai46.js";import"./bucket-6-ckIbrPfr.js";import"./index-D3kbHbBV.js";import"./bucket-11-DVAi0r8D.js";import"./createClassWrapper-CcV1pVUD.js";import"./TableToolbarSearch-DCJBnmH2.js";import"./bucket-12-B9dKP5Fb.js";import"./index-D2xy4Ma0.js";import"./index-C2eUe6cH.js";import"./index-D4-blIwu.js";import"./index-DrFu-skq.js";import"./story-helper-B-B3tTUV.js";import"./TableSelectRow-Ci3FKCGw.js";const R=`${V.prefix}--datagrid`,te=t=>{const o=S.useRef(),s=S.useRef(),i=x=>{o.current=x};K({instance:o==null?void 0:o.current,lastExpandedRowIndex:s==null?void 0:s.current,blockClass:R,activeElement:typeof document<"u"&&document.activeElement});const y=x=>[{id:"expander",Cell:({row:r})=>{const a={...r.getToggleRowExpandedProps(),onClick:b=>{b.stopPropagation(),r.toggleRowExpanded(),s.current=r.id}},{expanderButtonTitleExpanded:u="Collapse row",expanderButtonTitleCollapsed:g="Expand row"}=(o==null?void 0:o.current)||{},d=r.isExpanded?u:g;return r.canExpand&&n.jsx("button",{type:"button","aria-label":d,className:N(`${R}__row-expander`,`${v.prefix}--btn`,`${v.prefix}--btn--ghost`),...a,title:d,children:n.jsx(Q,{className:N(`${R}__expander-icon`,{[`${R}__expander-icon--not-open`]:!r.isExpanded,[`${R}__expander-icon--open`]:r.isExpanded})})})},width:48,disableResizing:!0,disableSortBy:!0,Header:""},...x];t.visibleColumns.push(y),t.useInstance.push(i)},_=`${V.prefix}--datagrid`,E=t=>{te(t);const o=s=>{S.useEffect(()=>{const{rows:r,initialState:a}=s,{expandedRowIds:u}=a;u&&Object.keys(u).forEach(g=>{const d=r.filter(b=>b.id.toString()===g.toString());d.length&&g.toString()===d[0].id.toString()&&d[0].toggleRowExpanded()})},[s]);const i=24,y=(r,{row:a})=>[r,{className:N({[`${_}__carbon-nested-row`]:a.depth>0,[`${_}__carbon-row-expanded`]:a.isExpanded})}],x=(r,{row:a})=>[r,{style:{paddingLeft:`${a.depth>1?i*2+(a.depth-1)*(i+i/3):a.depth===1?i*2:0}px`}}],P=(r,{cell:a,instance:u})=>{const g=u.columns.findIndex(d=>d.id===a.column.id)===0;return[r,{style:{marginRight:`${g&&a.row.depth>0?`${-32*a.row.depth-18}px`:""}`}}]};Object.assign(s,{withNestedRows:!0}),t.getRowProps.push(y),t.getRowProps.push(x),t.getCellProps.push(P)};t.useInstance.push(o)},no={title:"IBM Products/Components/Datagrid/NestedRows",component:f,tags:["autodocs"],parameters:{styles:q,docs:{page:()=>n.jsx(J,{blocks:[{title:"Nested rows",description:"Nested rows allow disclosing content in data tables progressively by displaying primary data first (parent row) and enabling users to navigate secondary information levels (child rows).\n- Include the `useNestedRows` hook\n- Make sure that any row you want to have nested rows in your data has a `subRows` property with an array of objects for each nested row. The row expander will be included by default as long as the `useNestedRows` hook is provided and it is detected that a row has `subRows` within it.\n          ",source:{code:`
const datagridState = useDatagrid(
  {
    columns,
    data,
    expanderButtonTitleExpanded: 'Collapse row',
    expanderButtonTitleCollapsed: 'Expand row',
  },
  useNestedRows
);

return <Datagrid datagridState={datagridState} />;
            `}}]})},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},H=[{Header:"Row Index",accessor:(t,o)=>o,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],w={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:t=>{console.log("row size changed to: ",t)},rowActions:[{id:"edit",itemText:"Edit",icon:Z,onClick:B("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:ee,isDelete:!0,onClick:B("Clicked row action: delete")}]},h={gridTitle:w.gridTitle,gridDescription:w.gridDescription,useDenseHeader:w.useDenseHeader,rowSize:w.rowSize,rowSizes:w.rowSizes,onRowSizeChange:w.onRowSizeChange},oe=({...t})=>{const o=C.useMemo(()=>H,[]),[s]=S.useState(T(10,2)),i=D({columns:o,data:s,DatagridActions:z,...t.defaultGridProps},E);return n.jsx(f,{datagridState:{...i}})},re=({...t})=>n.jsx(oe,{defaultGridProps:{...t}}),se="With single-level nested rows",p=re.bind({});p.storyName=se;p.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};p.args={...h,featureFlags:["Datagrid.useNestedRows"]};const ae=({...t})=>{const o=C.useMemo(()=>H,[]),[s]=S.useState(T(10,5,2,2)),i=D({columns:o,data:s,DatagridActions:z,...t.defaultGridProps},E);return n.jsx(f,{datagridState:{...i}})},Y=({...t})=>n.jsx(ae,{defaultGridProps:{...t}}),ie="With nested rows",l=Y.bind({});l.storyName=ie;l.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};l.args={...h};const ne=({...t})=>{const o=C.useMemo(()=>H,[]),[s]=S.useState(T(10,5,2,2)),i=D({columns:o,data:s,DatagridActions:z,...t.defaultGridProps},E,X);return n.jsx(f,{datagridState:{...i}})},de=({...t})=>n.jsx(ne,{defaultGridProps:{...t}}),pe="With selectable nested rows",m=de.bind({});m.storyName=pe;m.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};m.args={...h};const le="With initially expanded nested rows",c=Y.bind({});c.storyName=le;c.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};c.args={...h,initialState:{expandedRowIds:{1:!0,3:!0}}};var j,I,$;p.parameters={...p.parameters,docs:{...(j=p.parameters)==null?void 0:j.docs,source:{originalSource:`({
  ...args
}) => {
  return <SingleLevelNestedRows defaultGridProps={{
    ...args
  }} />;
}`,...($=(I=p.parameters)==null?void 0:I.docs)==null?void 0:$.source}}};var G,k,L;l.parameters={...l.parameters,docs:{...(G=l.parameters)==null?void 0:G.docs,source:{originalSource:`({
  ...args
}) => {
  return <NestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(L=(k=l.parameters)==null?void 0:k.docs)==null?void 0:L.source}}};var U,W,A;m.parameters={...m.parameters,docs:{...(U=m.parameters)==null?void 0:U.docs,source:{originalSource:`({
  ...args
}) => {
  return <SelectableNestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(A=(W=m.parameters)==null?void 0:W.docs)==null?void 0:A.source}}};var M,F,O;c.parameters={...c.parameters,docs:{...(M=c.parameters)==null?void 0:M.docs,source:{originalSource:`({
  ...args
}) => {
  return <NestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(O=(F=c.parameters)==null?void 0:F.docs)==null?void 0:O.source}}};const po=["SingleLevelNestedRowsUsageStory","NestedRowsUsageStory","SelectableNestedRowsUsageStory","NestedRowsInitialUsageStory"];export{c as NestedRowsInitialUsageStory,l as NestedRowsUsageStory,m as SelectableNestedRowsUsageStory,p as SingleLevelNestedRowsUsageStory,po as __namedExportsOrder,no as default};
