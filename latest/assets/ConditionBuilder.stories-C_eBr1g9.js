import{H as _t,p as pe,j as n,T as jt,P as xt,b as wt,B as et}from"./settings-CRrTVbgr.js";import{R as C,r as v}from"./index-CTjT7uj6.js";import{useMDXComponents as tt}from"./index-DSkyVWTJ.js";import"./chunk-HLWAVYOI-C5JlZMjl.js";import{e as St,i as qt,C as Nt}from"./index-D2xy4Ma0.js";import{au as nt}from"./bucket-5--iEWWNCt.js";import{V as ot}from"./bucket-6-ckIbrPfr.js";import{W as Ot,a as $t,aA as F}from"./bucket-17-DCCQrBLC.js";import{u as ue,_ as W,c as B,d as Tt,C as kt,m as it,b4 as rt,b2 as at}from"./deprecate-BLSDO8J_.js";import{f as st}from"./bucket-7-_MRsv-vc.js";import{aq as lt}from"./bucket-4-CyLPAhM6.js";import{E as dt}from"./bucket-16-C5jbOqAN.js";import{d as de}from"./bucket-1-D9I7e5DL.js";import{u as x}from"./uuidv4-BQrI85uz.js";import{P as e}from"./index-BRV0Se7Z.js";import{g as Pt}from"./devtools-BECPDnEK.js";import{L as At}from"./index-JTvCgqhd.js";import{A as ct,q as Bt}from"./bucket-0-oY2tyfOj.js";import{S as Dt}from"./Search-DsgRvTuS.js";import{k as It,aZ as Rt,aX as Ht,C as Ft}from"./events-D0gen66i.js";import{N as Lt}from"./NumberInput-BAY_6XtC.js";import{T as Et}from"./TextInput-Dn4YHwGS.js";import{D as De,a as Ce}from"./DatePicker-DKaYnu5B.js";import{S as _e}from"./SelectItem-BiVyLHyp.js";import{ar as pt}from"./bucket-15-nn6C4Edw.js";import"./index-BU4hwJwl.js";import"./index-DN5spsdJ.js";import"./iframe-DBTVSOxk.js";import"../sb-preview/runtime.js";import"./react-18-BLKOY-yY.js";import"./extends-CCbyfPlC.js";import"./index-C2eUe6cH.js";import"./inheritsLoose-SLCf_n8R.js";import"./toString-Cu7nsjnZ.js";import"./isSymbol-D87B3_a6.js";import"./index-D4-blIwu.js";import"./index-DrFu-skq.js";import"./LayerContext-BJwyboGm.js";import"./FormContext-D0sdIVRD.js";import"./bucket-13-DW3ggDVU.js";import"./useNormalizedInputProps-DXf7f817.js";import"./Text-CJa2B8Yb.js";import"./bucket-14-CVMjmpSy.js";import"./useAnnouncer-MW4fVOqQ.js";const ut=t=>{let{hideLabel:o,className:i,...s}=t;const a=ue();return C.createElement("div",W({className:B(`${a}--form-item`,i)},s),!o&&C.createElement("span",{className:`${a}--label ${a}--skeleton`}),C.createElement("div",{className:`${a}--select ${a}--skeleton`},C.createElement("div",{className:`${a}--select-input`})))};ut.propTypes={className:e.string,hideLabel:e.bool};const Gt=Array.from({length:_t.length-1}).map((t,o)=>o+1),mt=C.forwardRef(function(o,i){const{as:s="div",children:a,className:m,gap:l,orientation:f="vertical",...y}=o,c=ue(),u=B(m,{[`${c}--stack-${f}`]:!0,[`${c}--stack-scale-${l}`]:typeof l=="number"}),h={};return typeof l=="string"&&(h[`--${c}-stack-gap`]=l),C.createElement(s,W({},y,{ref:i,className:u,style:h}),a)});mt.propTypes={as:e.elementType,children:e.node,className:e.string,gap:e.oneOfType([e.string,e.oneOf(Gt)]),orientation:e.oneOf(["horizontal","vertical"])};const Mt=C.forwardRef(function(o,i){return C.createElement(mt,W({},o,{ref:i,orientation:"vertical"}))}),ft=C.forwardRef(function(o,i){let{children:s,className:a,disabled:m=!1,hideLabel:l,id:f,invalidText:y="Invalid time format.",invalid:c=!1,warningText:u="Warning message.",warning:h=!1,labelText:w,light:S=!1,maxLength:O=5,onChange:g=()=>{},onClick:d=()=>{},onBlur:q=()=>{},pattern:$="(1[012]|[1-9]):[0-5][0-9](\\s)?",placeholder:G="hh:mm",readOnly:P,size:I="md",type:R="text",value:D,...te}=o;const p=ue(),[_,j]=C.useState(D),[N,M]=C.useState(D);D!==N&&(j(D),M(D));function re(H){m||(P||j(_),d(H))}function ae(H){!m&&!P&&(j(_),g(H))}function he(H){m||(P||j(_),q(H))}const ge=B(`${p}--time-picker__input-field`,`${p}--text-input`,[a],{[`${p}--text-input--light`]:S,[`${p}--time-picker__input-field-error`]:c||h}),be=B({[`${p}--time-picker`]:!0,[`${p}--time-picker--light`]:S,[`${p}--time-picker--invalid`]:c,[`${p}--time-picker--warning`]:h,[`${p}--time-picker--readonly`]:P,[`${p}--time-picker--${I}`]:I,...a&&{[a]:!0}}),ve=B(`${p}--label`,{[`${p}--visually-hidden`]:l,[`${p}--label--disabled`]:m}),se=w?C.createElement("label",{htmlFor:f,className:ve},w):null;function le(){const H={onMouseDown:A=>{P&&(A.preventDefault(),A.target.focus())},onKeyDown:A=>{P&&["ArrowDown","ArrowUp"," "].includes(A.key)&&A.preventDefault()}};return C.Children.map(s,A=>{const Z=A;if(Z)return C.cloneElement(Z,{...Z.props,disabled:m,readOnly:P,...H})})}const ye={readOnly:P};return C.createElement("div",{className:B(`${p}--form-item`,a)},se,C.createElement("div",{className:be},C.createElement("div",{className:`${p}--time-picker__input`},C.createElement("input",W({className:ge,"data-invalid":c||void 0,disabled:m,id:f,maxLength:O,onClick:re,onChange:ae,onBlur:he,placeholder:G,pattern:$,ref:i,type:R,value:D},te,ye)),(c||h)&&C.createElement("div",{className:`${p}--time-picker__error__icon`},c?C.createElement(Ot,{className:`${p}--checkbox__invalid-icon`,size:16}):C.createElement($t,{className:`${p}--text-input__invalid-icon--warning`,size:16}))),le()),(c||h)&&C.createElement("div",{className:`${p}--form-requirement`},c?y:u))});ft.propTypes={children:e.node,className:e.string,disabled:e.bool,hideLabel:e.bool,id:e.string.isRequired,invalid:e.bool,invalidText:e.node,labelText:e.node,light:Tt(e.bool),maxLength:e.number,onBlur:e.func,onChange:e.func,onClick:e.func,pattern:e.string,placeholder:e.string,readOnly:e.bool,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.string,warning:e.bool,warningText:e.node};const xe=C.forwardRef(function(o,i){let{["aria-label"]:s="open list of options",children:a,id:m,disabled:l=!1,className:f,...y}=o;const c=ue(),u=B({[`${c}--select`]:!0,[`${c}--time-picker__select`]:!0,...f&&{[f]:!0}});return C.createElement("div",{className:u},C.createElement("select",W({"aria-label":s,className:`${c}--select-input`,disabled:l,id:m,ref:i},y),a),C.createElement(It,{className:`${c}--select__arrow`,"aria-hidden":"true"}))});xe.propTypes={children:e.node,className:e.string,defaultValue:e.any,disabled:e.bool,id:e.string.isRequired};const we=C.createContext(1),ht=C.forwardRef(function(o,i){let{as:s="section",level:a,...m}=o;const l=C.useContext(we),f=a??l+1,y=s;return C.createElement(we.Provider,{value:Math.min(f,6)},C.createElement(y,W({ref:i},m)))});ht.propTypes={as:e.elementType,children:e.node,className:e.string,level:e.number};const gt=C.forwardRef(function(o,i){const s=`h${C.useContext(we)}`;return C.createElement(s,W({ref:i},o))});gt.propTypes={children:e.node,className:e.string};const Vt={en:{if:"if","excl-if":"excl.if",and:"and",or:"or",is:"is",greater:"is greater than","greater-equal":"is greater than or equal to",lower:"is lower than","lower-equal":"is lower than or equal to","starts-with":"starts with","ends-with":"ends with",contains:"contains","one-of":"is one of",before:"is before",after:"is after",between:"is between","add-condition":"Add Condition","add-condition-group":"Add Condition Group","add-condition-sub-group":"Add Condition sub group",condition:"Condition",property:"Property",operator:"Operator",value:"Value",connector:"Connector",condition_row:"Condition row",remove_condition:"Remove condition",add_condition_row:"Add condition row",start:"Start",end:"End",clear_search:"Clear search input",actions:"Actions",then:"then",remove_action:"Remove Action",add_action:"Add action"}},bt=[{label:"if",id:"if"},{label:"excl.if",id:"excl.if"}],vt=[{label:"and",id:"and"},{label:"or",id:"or"}],zt=[{label:"is",id:"is",type:"all"},{label:"is greater than",id:"greater",type:"number"},{label:"is greater than or equal to",id:"greater-equal",type:"number"},{label:"is lower than",id:"lower",type:"number"},{label:"is lower than or equal to",id:"lower-equal",type:"number"},{label:"starts with",id:"starts-with",type:"text"},{label:"ends with",id:"ends-with",type:"text"},{label:"contains",id:"contains",type:"text"},{label:"is one of",id:"one-of",type:"option"},{label:"is before",id:"before",type:"date,time"},{label:"is after",id:"after",type:"date,time"},{label:"is between",id:"between",type:"date"}],r=`${pe.prefix}--condition-builder`,je=t=>{const o=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return`${o}/${i}/${s}`},Wt=Vt.en,b=t=>Wt[t]??t,Kt={text:t=>t,time:t=>t,number:(t,o)=>o.unit&&t?`${t} ${o.unit}`:t,option:t=>Array.isArray(t)?t.join(", "):t,date:t=>{if(Array.isArray(t)&&t.length>1){let o=t!=null&&t[0]?je(new Date(t[0])):"",i=t!=null&&t[1]?je(new Date(t[1])):"";return`${o} To ${i}`}else return t&&new Date(t)?je(new Date(t)):t}},V=({className:t,label:o,hideLabel:i,tooltipAlign:s,renderIcon:a,onClick:m,showToolTip:l,wrapperProps:f,onBlur:y,onFocus:c,onMouseEnter:u,onMouseLeave:h})=>{const w=()=>n.jsxs("button",{tabIndex:-1,className:B([t,`${r}__button`,{[`${r}__text-ellipsis`]:l&&!i}]),type:"button",onClick:m,onBlur:y,onFocus:c,onMouseEnter:u,onMouseLeave:h,children:[a&&n.jsx(a,{}),!i&&n.jsx("span",{children:o})]});return i||l?n.jsx(jt,{label:o,align:s,className:`${r}__con-tooltip`,...f,children:w()}):n.jsx(n.Fragment,{children:w()})};V.propTypes={className:e.string,hideLabel:e.bool,label:e.string,onBlur:e.func,onClick:e.func,onFocus:e.func,onMouseEnter:e.func,onMouseLeave:e.func,renderIcon:e.oneOfType([e.func,e.object]),showToolTip:e.bool,tooltipAlign:e.string,wrapperProps:e.object};V.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderButton",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},hideLabel:{description:"decides if label and tooltip to be hidden",type:{name:"bool"},required:!1},label:{description:"label of the button",type:{name:"string"},required:!1},onBlur:{description:"mouse events callbacks",type:{name:"func"},required:!1},onClick:{description:"callback triggered on click of add button",type:{name:"func"},required:!1},onFocus:{description:"",type:{name:"func"},required:!1},onMouseEnter:{description:"",type:{name:"func"},required:!1},onMouseLeave:{description:"",type:{name:"func"},required:!1},renderIcon:{description:"Optional prop to allow overriding the icon rendering.",type:{name:"union",value:[{name:"func"},{name:"object"}]},required:!1},showToolTip:{description:"decides if  tooltip to be shown",type:{name:"bool"},required:!1},tooltipAlign:{description:"tooltip position",type:{name:"string"},required:!1},wrapperProps:{description:"optional props for tree grid to add role and aria-label to wrapper span",type:{name:"object"},required:!1}}};const T=({children:t,className:o,label:i,renderIcon:s,title:a,type:m,showToolTip:l,condition:f,popOverClassName:y,config:c,...u})=>{const h=v.useRef(null),[w,S]=v.useState(i),[O,g]=v.useState(!1);return v.useEffect(()=>{const d=u["data-name"]=="valueField"&&m?Kt[m](i,c):i;S(b(d))},[i]),v.useEffect(()=>{if(f){let d=u["data-name"];(f.popoverToOpen&&d!==f.popoverToOpen||d=="valueField"&&m=="option"&&f.operator!=="one-of")&&g(!1),f.popoverToOpen==d&&g(!0)}else g(!1)},[f,i]),v.useEffect(()=>{if(O&&h.current){const d=h.current.querySelector("input");d&&d.focus()}},[h,O]),n.jsxs(xt,{open:O,isTabTip:!0,role:"gridcell",className:y,onRequestClose:()=>{g(!1)},children:[n.jsx(V,{label:w??b("add-condition"),hideLabel:!i,onClick:()=>{t&&g(!O)},className:o,"aria-haspopup":!0,"aria-expanded":O,renderIcon:s||(i==null?ct:null),showToolTip:l,...u}),n.jsx(wt,{className:`${r}__item__content`,role:"dialog","aria-label":`${a}`,children:n.jsxs(At,{children:[n.jsx("h1",{className:`${r}__item__title`,children:a}),n.jsx("div",{ref:h,children:O&&t})]})})]})};T.propTypes={children:e.node,className:e.string,condition:e.object,config:e.object,label:e.oneOfType([e.string,e.array]),popOverClassName:e.string,renderIcon:e.oneOfType([e.func,e.object]),showToolTip:e.bool,title:e.string,type:e.string};T.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItem",props:{children:{description:"provide the contents of the popover",type:{name:"node"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},condition:{description:"current condition state object",type:{name:"object"},required:!1},config:{description:"this is the config object again the current property from inputConfig",type:{name:"object"},required:!1},label:{description:"text to be displayed in the field",type:{name:"union",value:[{name:"string"},{name:"array"}]},required:!1},popOverClassName:{description:"class name for popover",type:{name:"string"},required:!1},renderIcon:{description:"Optional prop to allow overriding the icon rendering.",type:{name:"union",value:[{name:"func"},{name:"object"}]},required:!1},showToolTip:{description:"show tool tip",type:{name:"bool"},required:!1},title:{description:"title of the popover",type:{name:"string"},required:!1},type:{description:"input type",type:{name:"string"},required:!1}}};const Zt={operator:"or",groups:[{groupSeparateOperator:null,groupOperator:"and",statement:"if",id:x(),conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:x()}]}]},K=v.createContext(),Ne=t=>{const[o,i]=v.useState({groups:[]});return n.jsx(K.Provider,{value:{rootState:o,setRootState:i,inputConfig:t.inputConfig,popOverSearchThreshold:t.popOverSearchThreshold,getOptions:t.getOptions,variant:t.variant},children:t.children})};Ne.propTypes={children:e.node.isRequired,getOptions:e.func,inputConfig:e.shape({properties:e.arrayOf(e.shape({id:e.string,label:e.string,icon:e.oneOfType([e.func,e.object]),type:e.oneOf(["text","number","date","option","time"]),config:e.shape({options:e.arrayOf(e.shape({id:e.string,label:e.string,icon:e.oneOfType([e.func,e.object])})),includeSearch:e.bool})}))}).isRequired,popOverSearchThreshold:e.number.isRequired,variant:e.string.isRequired};Ne.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderProvider",props:{children:{description:"Provide the contents of the ConditionBuilder.",type:{name:"node"},required:!0},getOptions:{description:`This is an optional callback function that will be triggered when options array is not passed in the inputConfig against a property. 
This can be a asynchronous function that need  to  return a promise, so it will allow to fetch options from API call.
options has to be in valid format
[{
          label: 'label',
          id: 'id',
        },...]`,type:{name:"func"},required:!1},inputConfig:{description:"This is a mandatory prop that defines the input to the condition builder.",type:{name:"shape",value:{properties:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'option'",computed:!1},{value:"'time'",computed:!1}],required:!1},config:{name:"shape",value:{options:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1}}},required:!1},includeSearch:{name:"bool",required:!1}},required:!1}}},required:!1}}},required:!0},popOverSearchThreshold:{description:"Provide an mandatory numeric value that will be used to enable search option in the popovers with list.",type:{name:"number"},required:!0},variant:{description:"Provide the condition builder variant: sentence/ tree",type:{name:"string"},required:!0}}};const L=({conditionState:t={},config:o={},onChange:i})=>{const s=t.operator==="one-of",{popOverSearchThreshold:a,getOptions:m}=v.useContext(K),[l,f]=v.useState(o.options),[y,c]=v.useState(o.options),u=Array.isArray(t.value)?t.value:t.value!==void 0?[t.value]:[],h=v.useRef();v.useEffect(()=>{!l&&m&&(async()=>{const d=await m(t);(d==null?void 0:d.length)>0&&Object.keys(d[0]).includes("label")&&Object.keys(d[0]).includes("id")&&(f(d),c(d))})()},[]),v.useEffect(()=>{var g;if(h.current){const d=(g=h.current)==null?void 0:g.querySelector("input, button,li");d==null||d.focus()}},[l]);const w=g=>{g.currentTarget.dataset.selectedAll=="false"?i(void 0):i(l.map(d=>d.id))},S=g=>{const{value:d}=g.target;let q=l.filter($=>$.label.toLowerCase().includes(d.toLowerCase()));c(q)},O=(g,d,q)=>{if(s)if(q){let $=u.filter(G=>G!==d.id);i($.length>0?$:void 0,g)}else i([...u,d.id],g);else i(d.id,g)};return n.jsxs(n.Fragment,{children:[l&&n.jsxs("div",{className:`${r}__item-option`,ref:h,children:[(o.includeSearch||l.length>a)&&n.jsx("div",{className:`${r}__item-option__search`,children:n.jsx(Dt,{size:"sm",labelText:b("clear_search"),closeButtonLabelText:b("clear_search"),onChange:S})}),s&&n.jsxs("div",{className:`${r}__multiselectSelectionStatusContainer`,children:[n.jsx("h4",{children:n.jsxs("label",{children:[u.length,"/",l.length," Selected"]})}),n.jsx(et,{kind:"ghost",size:"sm","data-selected-all":`${u.length==0}`,onClick:w,className:`${r}__selectAll-button`,children:u.length==0?"Select all":"Deselect all"})]}),n.jsx("ul",{"aria-label":t.label?t.label:t.property?t.property:b("property"),role:"listbox","data-multi-select":s,children:y==null?void 0:y.map(g=>{let d=u.includes(g.id),q=g.icon;return n.jsx("li",{tabIndex:0,role:"option","aria-selected":d,className:`${r}__item-option__option`,onKeyUp:()=>!1,onClick:$=>O($,g,d),children:n.jsx("div",{className:`${r}__item-option__option-content`,children:s?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`${r}__option-check-box`,children:d?n.jsx(Rt,{}):n.jsx(Ht,{})}),n.jsx("span",{className:`${r}__item-option__option-label`,children:g.label}),q&&n.jsx("span",{className:`${r}__option-icon`,children:n.jsx(q,{})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:`${r}__item-option__option-label`,children:[q&&n.jsx(q,{}),g.label]}),d&&n.jsx(Ft,{className:`${r}__checkmark`})]})})},g.id)})})]}),!l&&n.jsx(ut,{})]})};L.propTypes={conditionState:e.object,config:e.object,onChange:e.func};L.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemOption",props:{conditionState:{defaultValue:{value:"{}",computed:!1},description:"current condition object",type:{name:"object"},required:!1},config:{defaultValue:{value:"{}",computed:!1},description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const ee=t=>{setTimeout(()=>{var o,i,s,a;(i=(o=t.target.closest('[role="gridcell"]'))==null?void 0:o.querySelector("button"))==null||i.click(),(a=(s=t.target.closest('[role="gridcell"]'))==null?void 0:s.querySelector("button"))==null||a.focus()},0)},Q=t=>{setTimeout(()=>{t==null||t.focus()},0)},Se=(t,o,i,s,a)=>{t==document.activeElement?o!==i.length-1?Q(i[o+1]):Q(i[s?0:i.length-1]):Array.from(i).indexOf(document.activeElement)==-1&&a&&Q(i[0])},qe=(t,o,i,s,a)=>{t==document.activeElement?Q(o!==0?i[o-1]:i[s?i.length-1:0]):Array.from(i).indexOf(document.activeElement)==-1&&a&&Q(i[i.length-1])},oe=({operator:t,className:o,onChange:i,...s})=>{const{variant:a}=v.useContext(K),m=v.useCallback((c,u)=>{u?c.classList.add("hoveredConnector"):c.classList.remove("hoveredConnector")},[]),l=c=>{let u=c.currentTarget.closest(".eachGroup");m(u,!0)},f=c=>{let u=c.currentTarget.closest(".eachGroup");m(u,!1)},y=(c,u)=>{i(c),ee(u)};return a=="tree"?n.jsx("span",{className:`${o} ${r}__connector-disabled`,children:t}):n.jsx(T,{label:t,title:b("connector"),"data-name":"connectorField",onMouseEnter:l,onMouseLeave:f,onFocus:l,onBlur:f,...s,popOverClassName:o,className:`${r}__connector-button `,children:n.jsx(L,{config:{options:vt},conditionState:{value:t,label:b("connector")},onChange:y})})};oe.propTypes={className:e.string,onChange:e.func,operator:e.string};oe.__docgenInfo={description:"",methods:[],displayName:"ConditionConnector",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},operator:{description:"string that defines the connector operator (and/or)",type:{name:"string"},required:!1}}};const Ut=`${pe.prefix}--condition-builder`,Oe=({conditionState:t,config:o,onChange:i})=>{var a;const s=(m,{value:l})=>{i(l+"")};return n.jsx("div",{className:`${Ut}__item-number`,children:n.jsx(Lt,{label:t.property,hideLabel:!0,id:(a=t.property)==null?void 0:a.replace(/\s/g,""),value:t.value?t.value.split(" ")[0]:t.value,min:o.min,max:o.max,step:o.step,allowEmpty:!0,onChange:s})})};Oe.propTypes={conditionState:e.object,config:e.object,onChange:e.func};Oe.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemNumber",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},config:{description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const $e=({conditionState:t,onChange:o})=>{var i;return n.jsx("div",{className:`${r}__item-text`,children:n.jsx(Et,{labelText:t.property,hideLabel:!0,value:t.value??"",id:(i=t.property)==null?void 0:i.replace(/\s/g,""),onChange:s=>{o(s.target.value)}})})};$e.propTypes={conditionState:e.object,onChange:e.func};$e.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemText",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Xt=`${pe.prefix}--condition-builder`,Te=({conditionState:t,onChange:o})=>{const i=v.useRef(),s=t.operator=="between"?"range":"single";return n.jsxs("div",{className:`${Xt}__item-date `,children:[s=="single"&&n.jsx(De,{ref:i,dateFormat:"d/m/Y",datePickerType:"single",onClose:o,value:t.value,children:n.jsx(Ce,{id:"datePicker",placeholder:"dd/mm/yyyy",labelText:t.property})}),s=="range"&&n.jsxs(De,{ref:i,dateFormat:"d/m/Y",datePickerType:s,onClose:o,value:t.value,children:[n.jsx(Ce,{id:"datePickerStart",placeholder:"dd/mm/yyyy",labelText:b("start")}),n.jsx(Ce,{id:"datePickerEnd",placeholder:"dd/mm/yyyy",labelText:b("end")})]})]})};Te.propTypes={conditionState:e.object,onChange:e.func};Te.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemDate",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const ke=({onChange:t,config:o})=>{var h,w;const[i,s]=v.useState(""),[a,m]=v.useState("AM"),[l,f]=v.useState((h=o==null?void 0:o.timeZones)==null?void 0:h[0]);v.useEffect(()=>{let S=`${i??""} ${a??""} ${l??""}`;t(i?S:void 0)},[i,a,l]);const y=S=>{f(S.target.value)},c=S=>{m(S.target.value)},u=S=>{s(S.target.value)};return n.jsx("div",{className:`${r}__item-time`,children:n.jsxs(ft,{id:"time-picker",labelText:"Select a time",onChange:u,children:[n.jsxs(xe,{id:"time-picker-day-zone",onChange:c,children:[n.jsx(_e,{value:"AM",text:"AM"}),n.jsx(_e,{value:"PM",text:"PM"})]}),n.jsx(xe,{id:"time-picker-select-2",onChange:y,children:(w=o==null?void 0:o.timeZones)==null?void 0:w.map((S,O)=>n.jsx(_e,{value:S,text:S},O))})]})})};ke.propTypes={config:e.object,onChange:e.func};ke.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemTime",props:{config:{description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Pe=({className:t,onClick:o,addConditionSubGroupHandler:i,showConditionSubGroupPreviewHandler:s,hideConditionSubGroupPreviewHandler:a,showConditionPreviewHandler:m,hideConditionPreviewHandler:l,enableSubGroup:f,buttonLabel:y})=>{const[c,u]=v.useState(!1),h=()=>{u(!0)},w=()=>{u(!1)},S=()=>{l==null||l(),o()},O=()=>f?{onMouseEnter:m,onMouseLeave:l,onFocus:m,onBlur:l}:{},g=()=>({onMouseEnter:s,onMouseLeave:a,onFocus:s,onBlur:a}),d=f?{role:"gridcell","aria-label":b("add-condition")}:{};return n.jsxs("div",{className:`${t} ${r}__add-button-wrapper`,role:f?"none":"gridcell","aria-label":f?void 0:b("add_condition_row"),onMouseEnter:h,onMouseLeave:w,onFocus:h,onBlur:w,children:[n.jsx(V,{renderIcon:Bt,onClick:S,...O(),className:`${r}__add-button`,hideLabel:!0,"data-name":"addButton",label:y??b("add-condition"),wrapperProps:d}),c&&f&&n.jsx(V,{renderIcon:pt,onClick:i,className:`${r}__add-condition-group ${r}__gap-left`,hideLabel:!0,label:b("add-condition"),wrapperProps:d,...g()})]})};Pe.propTypes={addConditionSubGroupHandler:e.func,buttonLabel:e.string,className:e.string,enableSubGroup:e.bool,hideConditionPreviewHandler:e.func,hideConditionSubGroupPreviewHandler:e.func,onClick:e.func,showConditionPreviewHandler:e.func,showConditionSubGroupPreviewHandler:e.func};Pe.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderAdd",props:{addConditionSubGroupHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},buttonLabel:{description:"tooltip label for plus button",type:{name:"string"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},enableSubGroup:{description:"boolean to enable sub groups for the tree variant",type:{name:"bool"},required:!1},hideConditionPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},hideConditionSubGroupPreviewHandler:{description:"",type:{name:"func"},required:!1},onClick:{description:"callback triggered on click of add button",type:{name:"func"},required:!1},showConditionPreviewHandler:{description:"",type:{name:"func"},required:!1},showConditionSubGroupPreviewHandler:{description:"",type:{name:"func"},required:!1}}};const ce=t=>{const{property:o,value:i,operator:s}=t.condition,{onRemove:a,onChange:m,condition:l,conjunction:f,onConnectorOperatorChange:y,isStatement:c,group:u,onStatementChange:h,conditionIndex:w,addConditionHandler:S,addConditionSubGroupHandler:O,aria:g,hideConditionSubGroupPreviewHandler:d,showConditionSubGroupPreviewHandler:q,hideConditionPreviewHandler:$,showConditionPreviewHandler:G,isLastCondition:P}=t,{inputConfig:I,variant:R}=v.useContext(K),D={option:L,text:$e,number:Oe,date:Te,time:ke},[te,p]=v.useState(!1),_=k=>{var A;return((A=I.properties)==null?void 0:A.filter(Z=>Z.id==k)[0])??{}},{icon:j,type:N,config:M,label:re}=_(o);let ae;ae=o?D[N]:null;const he=(k,A)=>{ee(A),h(k)},ge=k=>{m({...l,property:k,operator:void 0,value:"",popoverToOpen:"operatorField"})},be=k=>{m({...l,operator:k,value:void 0,popoverToOpen:"valueField"})},ve=k=>{m({...l,value:k,popoverToOpen:""})},se=()=>{p(!0)},le=()=>{p(!1)},ye=()=>zt.filter(k=>k.type.indexOf(N)!=-1||k.type=="all"),H=()=>R=="tree"?{"aria-level":g.level,"aria-posinset":g.posinset,"aria-setsize":g.setsize}:{};return n.jsxs("div",{className:B(`${r}__condition-block`,{[`${r}__condition__deletion-preview`]:te},{[`${r}__gap-bottom`]:R=="tree"&&!(w+1>=u.conditions.length)},{[`${r}__gap ${r}__gap-bottom`]:R=="sentence"}),role:"row","aria-label":b("condition_row"),tabIndex:-1,...H(),children:[f?n.jsx(oe,{className:`${r}__gap`,operator:f,onChange:k=>y(k)}):n.jsx("div",{role:"gridcell"}),c&&n.jsx(T,{label:u.statement,title:b("condition"),"data-name":"connectorField",popOverClassName:`${r}__gap`,className:`${r}__statement-button`,children:n.jsx(L,{conditionState:{value:u.statement,label:b("condition")},onChange:he,config:{options:bt}})}),n.jsx(T,{label:re,title:b("property"),renderIcon:j??null,className:`${r}__property-field`,"data-name":"propertyField",condition:l,type:N,children:n.jsx(L,{conditionState:{value:o,label:b("property")},onChange:ge,config:{options:I.properties}})}),o&&n.jsx(T,{label:s,title:b("operator"),"data-name":"operatorField",condition:l,type:N,children:n.jsx(L,{config:{options:ye()},conditionState:{value:s,label:b("operator")},onChange:be})}),o&&s&&n.jsx(T,{label:i,type:N,title:re,showToolTip:!0,"data-name":"valueField",condition:l,config:M,children:n.jsx(ae,{conditionState:{property:o,operator:s,value:i},onChange:ve,config:M,"data-name":"valueField"})}),n.jsx("span",{role:"gridcell","aria-label":b("remove_condition"),children:n.jsx(V,{hideLabel:!0,label:b("remove_condition"),onClick:a,onMouseEnter:se,onMouseLeave:le,onFocus:se,onBlur:le,renderIcon:kt,className:`${r}__close-condition`,"data-name":"closeCondition"})}),P(w,u.conditions)&&n.jsx(Pe,{onClick:()=>{S(w)},addConditionSubGroupHandler:()=>{O(w)},showConditionSubGroupPreviewHandler:q,hideConditionSubGroupPreviewHandler:d,enableSubGroup:R=="tree",showConditionPreviewHandler:G,hideConditionPreviewHandler:$,className:`${r}__gap ${r}__gap-left`})]})};ce.propTypes={addConditionHandler:e.func,addConditionSubGroupHandler:e.func,aria:e.object,condition:e.object,conditionIndex:e.number,conjunction:e.string,group:e.object,hideConditionPreviewHandler:e.func,hideConditionSubGroupPreviewHandler:e.func,isLastCondition:e.func,isStatement:e.bool,onChange:e.func,onConnectorOperatorChange:e.func,onRemove:e.func,onStatementChange:e.func,showConditionPreviewHandler:e.func,showConditionSubGroupPreviewHandler:e.func,state:e.object};ce.__docgenInfo={description:"This component build each block of condition consisting of property, operator value and close button.",methods:[],displayName:"ConditionBlock",props:{addConditionHandler:{description:"callback to add a new condition",type:{name:"func"},required:!1},addConditionSubGroupHandler:{description:"callback to add a new condition subgroup",type:{name:"func"},required:!1},aria:{description:"object hold aria attributes",type:{name:"object"},required:!1},condition:{description:"",type:{name:"object"},required:!1},conditionIndex:{description:"",type:{name:"number"},required:!1},conjunction:{description:"string that decides to show the condition connector",type:{name:"string"},required:!1},group:{description:"object that hold the current group object where is condition is part of",type:{name:"object"},required:!1},hideConditionPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},hideConditionSubGroupPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},isLastCondition:{description:"",type:{name:"func"},required:!1},isStatement:{description:"boolean that decides to show the statement(if/ excl.if)",type:{name:"bool"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},onConnectorOperatorChange:{description:"callback to handle the connector(and/or) change",type:{name:"func"},required:!1},onRemove:{description:"callback for Remove a condition",type:{name:"func"},required:!1},onStatementChange:{description:"callback to handle the statement(if/ excl.if) change",type:{name:"func"},required:!1},showConditionPreviewHandler:{description:"handler for showing add condition preview",type:{name:"func"},required:!1},showConditionSubGroupPreviewHandler:{description:"handler for showing sub group preview",type:{name:"func"},required:!1},state:{description:"object that hold the current condition",type:{name:"object"},required:!1}}};const ne=({previewType:t})=>{const o=()=>n.jsxs("div",{children:[n.jsx(T,{label:b("property")}),n.jsx(T,{label:b("operator")}),n.jsx(T,{label:b("value")})]});return n.jsxs(n.Fragment,{children:[t=="newGroup"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`${r}__group__row ${r}__group-preview  `,children:n.jsx(T,{className:`${r}__statement-button`,label:b("and")})}),n.jsxs("div",{"aria-hidden":!0,className:`${r}__group ${r}__condition-wrapper ${r}__group-preview ${r}__group-wrapper`,children:[n.jsx("div",{className:`${r}__gap`,children:n.jsx(T,{className:`${r}__statement-button`,label:b("if")})}),o()]})]}),t=="subGroup"&&n.jsx("div",{className:`${r}__group-preview`,children:n.jsxs("div",{className:`${r}__condition-block  ${r}__gap`,children:[n.jsx(T,{label:b("and"),className:`${r}__statement-button`,popOverClassName:`${r}__gap`}),n.jsxs("div",{className:`${r}__group ${r}__condition-wrapper`,children:[n.jsx(oe,{className:`${r}__gap ${r}__groupConnector`,operator:b("if")}),o()]})]})}),t=="condition"&&n.jsx("div",{className:`${r}__group-preview`,children:n.jsxs("div",{className:`${r}__condition-block  ${r}__gap`,children:[n.jsx(T,{label:b("and"),className:`${r}__statement-button`,popOverClassName:`${r}__gap`}),o()]})})]})};ne.propTypes={previewType:e.oneOf(["condition","subGroup","newGroup"])};ne.__docgenInfo={description:"",methods:[],displayName:"ConditionPreview",props:{previewType:{description:"type of review to be displayed",type:{name:"enum",value:[{value:"'condition'",computed:!1},{value:"'subGroup'",computed:!1},{value:"'newGroup'",computed:!1}]},required:!1}}};const me=({group:t,aria:o,onRemove:i,onChange:s,conditionBuilderRef:a,className:m})=>{const{variant:l}=v.useContext(K),[f,y]=v.useState(-1),[c,u]=v.useState(-1),h=(p,_)=>{t.conditions.length>1?(s({...t,conditions:t.conditions.filter(j=>p!==j.id)}),O(_)):i(_)},w=(p,_)=>{const j=[...t.conditions.slice(0,_),p,...t.conditions.slice(_+1)];s({...t,conditions:j})},S=p=>{let _={property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:x()};s({...t,conditions:[...t.conditions.slice(0,p+1),_,...t.conditions.slice(p+1)]})},O=p=>{var j,N,M;const _=(M=(N=(j=p.currentTarget)==null?void 0:j.closest('[role="row"]'))==null?void 0:N.previousSibling)==null?void 0:M.querySelector('[data-name="closeCondition"]');_&&_.focus()},g=p=>{s({...t,conditions:[...t.conditions.slice(0,p+1),{groupSeparateOperator:null,groupOperator:"and",statement:"if",conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:x()}],id:x()},...t.conditions.slice(p+1)]})},d=(p,_)=>p+1>=_.length||_.length-1!=p&&_[p+1].conditions,q=p=>{u(p)},$=()=>{u(-1)},G=p=>{y(p)},P=()=>{y(-1)},I=p=>{s({...t,statement:p})},R=p=>{s({...t,groupOperator:p})},D=()=>{var p;return n.jsx("div",{className:`${m}  eachGroup`,children:n.jsx("div",{className:`${r}__condition-wrapper`,role:"grid","aria-label":b("condition_builder_group"),children:(p=t==null?void 0:t.conditions)==null?void 0:p.map((_,j)=>n.jsx("div",{className:`${r}__group-wrapper`,children:n.jsx(ce,{conjunction:j>0?t.groupOperator:void 0,aria:{level:o.level+1,posinset:j+1,setsize:t.conditions.length},isStatement:j==0,condition:_,group:t,conditionIndex:j,onChange:N=>{w(N,j)},addConditionHandler:S,onRemove:N=>{h(_.id,N)},onConnectorOperatorChange:R,onStatementChange:I,isLastCondition:d})},_.id))})})},te=()=>{var p;return n.jsxs("div",{className:`${m} ${r}__condition-wrapper`,role:o.level===1?"rowgroup":void 0,"aria-label":o.level==1?b("condition_builder_group"):void 0,children:[n.jsx("div",{tabIndex:0,role:"row","aria-level":o.level,"aria-posinset":o.posinset,"aria-setsize":o.setsize,children:n.jsx(T,{label:t.statement,title:b("condition"),"data-name":"connectorField",popOverClassName:`${r}__gap`,className:`${r}__statement-button`,children:n.jsx(L,{conditionState:{value:t.statement,label:b("condition")},onChange:(_,j)=>{ee(j),I(_)},config:{options:bt}})})}),(p=t==null?void 0:t.conditions)==null?void 0:p.map((_,j)=>n.jsxs(v.Fragment,{children:[_.conditions?n.jsxs("div",{className:B(`${r}__condition-block subgroup  ${r}__gap`,{[`${r}__gap-bottom`]:t.conditions.length<j+1}),children:[n.jsx(oe,{className:`${r}__gap ${r}__groupConnector`,operator:t.groupOperator,"aria-hidden":!0}),n.jsx(me,{aria:{level:o.level+1,posinset:j+1,setsize:t.conditions.length},className:`${r}__group`,group:_,onChange:N=>{w(N,j)},onRemove:N=>{h(_.id,N)},conditionBuilderRef:a})]}):n.jsx(ce,{conjunction:j>0?t.groupOperator:void 0,aria:{level:o.level+1,posinset:j+1,setsize:t.conditions.length},isStatement:!1,condition:_,group:t,conditionIndex:j,addConditionHandler:S,addConditionSubGroupHandler:g,onChange:N=>{w(N,j)},onRemove:N=>{h(_.id,N)},onConnectorOperatorChange:R,onStatementChange:I,showConditionSubGroupPreviewHandler:()=>{q(j)},hideConditionSubGroupPreviewHandler:$,showConditionPreviewHandler:()=>{G(j)},hideConditionPreviewHandler:P,isLastCondition:d}),j==c&&n.jsx(ne,{previewType:"subGroup"}),j==f&&n.jsx(ne,{previewType:"condition"})]},_.id))]})};return n.jsxs(n.Fragment,{children:[l=="tree"&&te(),l=="sentence"&&D()]})};me.propTypes={aria:e.object,className:e.string,conditionBuilderRef:e.object,group:e.object,onChange:e.func,onRemove:e.func};me.__docgenInfo={description:`state - this is the current group that is being rendered . This can be a inner group or outer group
All the inner components of group are called from here.
@returns`,methods:[],displayName:"ConditionGroupBuilder",props:{aria:{description:"object contains the aria attributes",type:{name:"object"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},conditionBuilderRef:{description:`className: PropTypes.string,
ref of condition builder`,type:{name:"object"},required:!1},group:{description:"",type:{name:"object"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},onRemove:{description:"call back to remove the particular group from the state tree",type:{name:"func"},required:!1}}};const yt=()=>{const{rootState:t}=v.useContext(K);return n.jsx("div",{className:`${r}__group-separator`,role:"row",tabIndex:-1,"aria-level":1,children:n.jsx(T,{label:t.operator,title:b("condition"),"data-name":"connectorField",popOverClassName:`${r}__gap`,className:`${r}__statement-button`,children:n.jsx(L,{conditionState:{value:t.operator,label:b("condition")},onChange:(o,i)=>{ee(i)},config:{options:vt}})})})};yt.__docgenInfo={description:"",methods:[],displayName:"GroupConnector"};const Ae=({startConditionLabel:t,conditionBuilderRef:o,getConditionState:i,initialState:s})=>{var g;const{rootState:a,setRootState:m,variant:l}=v.useContext(K),[f,y]=v.useState(!1),[c,u]=v.useState(!1);v.useEffect(()=>{var d;(d=a==null?void 0:a.groups)!=null&&d.length?y(!0):y(!1),i&&i(a)},[a]);const h=()=>{y(!0),m(s??Zt)},w=v.useCallback(d=>{m({...a,groups:a.groups.filter(q=>d!==q.id)})},[m,a]),S=(d,q)=>{const $=[...a.groups.slice(0,q),d,...a.groups.slice(q+1)];m({...a,groups:$})},O=()=>{const d={groupSeparateOperator:"and",groupOperator:"and",statement:"if",id:x(),conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:x()}]};m({...a,groups:[...a.groups,d]})};return n.jsxs(n.Fragment,{children:[!f&&n.jsx(et,{className:`${r}__add-condition-button`,renderIcon:d=>n.jsx(ct,{size:16,...d}),iconDescription:t,kind:"ghost",size:"sm",onClick:h,children:t}),f&&n.jsx(ht,{className:`${r}__heading`,level:4,children:n.jsx(gt,{children:"Condition"})}),n.jsxs("div",{className:`${r}__content-container`,role:"treegrid","aria-label":"condition builder tree",children:[a&&((g=a==null?void 0:a.groups)==null?void 0:g.map((d,q)=>n.jsxs("div",{className:`${r}__group-wrapper`,children:[n.jsx(me,{className:`${r}__group`,aria:{level:1,posinset:q*2+1,setsize:a.groups.length*2},group:d,onRemove:()=>{w(d.id)},onChange:$=>{S($,q)},conditionBuilderRef:o}),q<a.groups.length-1&&n.jsx(yt,{})]},d.id))),f&&n.jsxs(n.Fragment,{children:[l=="tree"&&n.jsx("div",{role:"row",tabIndex:-1,"aria-level":1,children:n.jsx(V,{renderIcon:pt,onClick:O,onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},className:`${r}__add-condition-group `,hideLabel:!0,label:b("add-condition-sub-group"),wrapperProps:{role:"gridcell","aria-label":b("add-condition-sub-group")}})}),c&&n.jsx(ne,{previewType:"newGroup"})]})]})]})};Ae.propTypes={actions:e.arrayOf(e.shape({id:e.number,label:e.string})),conditionBuilderRef:e.object,getActionsState:e.func,getConditionState:e.func.isRequired,initialState:e.shape({groups:e.arrayOf(e.shape({groupSeparateOperator:e.string,groupOperator:e.string,statement:e.string,conditions:e.arrayOf(e.shape({property:e.string,operator:e.string,value:e.string}))}))}),startConditionLabel:e.string.isRequired};Ae.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderContent",props:{actions:{description:"optional array of object that give the list of actions.",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"number",required:!1},label:{name:"string",required:!1}}}},required:!1},conditionBuilderRef:{description:"ref of condition builder",type:{name:"object"},required:!1},getActionsState:{description:"callback functions that will provide the updated action state back.",type:{name:"func"},required:!1},getConditionState:{description:"This is a callback function that returns the updated state",type:{name:"func"},required:!0},initialState:{description:"Optional prop if the condition building need to start from a predefined initial state",type:{name:"shape",value:{groups:{name:"arrayOf",value:{name:"shape",value:{groupSeparateOperator:{name:"string",required:!1},groupOperator:{name:"string",required:!1},statement:{name:"string",required:!1},conditions:{name:"arrayOf",value:{name:"shape",value:{property:{name:"string",required:!1},operator:{name:"string",required:!1},value:{name:"string",required:!1}}},required:!1}}},required:!1}}},required:!1},startConditionLabel:{description:"",type:{name:"string"},required:!0}}};const Yt=(t,o)=>t[o],Jt=(t,o)=>{const i=document.activeElement;i.closest('[role="dialog"]')?Qt(t,i.closest('[role="dialog"]')):on(t,o)},Qt=(t,o)=>{var l,f,y;const i=t.key,s=Yt(t,"shiftKey"),a=(l=o.querySelector("ul"))==null?void 0:l.dataset.multiSelect;let m=[];switch(i){case"ArrowUp":o.querySelectorAll('[role="option"]').forEach((c,u,h)=>{qe(c,u,h)});break;case"ArrowDown":o.querySelectorAll('[role="option"]').forEach((c,u,h)=>{Se(c,u,h)});break;case"Tab":m=[...Array.from(o.querySelectorAll(`.${r}__selectAll-button,[role="searchbox"]`)),o.querySelector('[role="option"]')],m.forEach((c,u,h)=>{s?qe(c,u,h,!0,!0):Se(c,u,h,!0,!0)}),t.preventDefault();break;case" ":a==="true"&&(document.activeElement.type!=="button"&&((f=document.activeElement)==null||f.click()),t.preventDefault());break;case"Enter":a!=="true"&&document.activeElement.type!=="button"&&((y=document.activeElement)==null||y.click(),ee(t));break;case"Escape":ee(t);break}},Ct=t=>Array.from(t.current.querySelectorAll('[role="row"]')),en=(t,o)=>Ct(o).findIndex(s=>s.contains(t)),tn=(t,o)=>{const i=Ct(o),s=en(t.target,o);nn(t,s,i)},nn=(t,o,i)=>{var l;let s=o;t.key==="ArrowUp"&&(s=o==0?o:o-1),t.key==="ArrowDown"&&(s=o===i.length-1?i.length-1:o+1);const a=i[s],m=t.target.dataset.name;(l=a==null?void 0:a.querySelector(`[data-name="${m}"]`))==null||l.focus()},on=(t,o)=>{switch(t.key){case"ArrowRight":case"ArrowLeft":o.current.querySelectorAll('[role="gridcell"] button').forEach((i,s,a)=>{t.key==="ArrowRight"?Se(i,s,a):qe(i,s,a)});break;case"ArrowUp":case"ArrowDown":tn(t,o);break}},Be="ConditionBuilder";let z=C.forwardRef(({className:t,inputConfig:o,startConditionLabel:i,popOverSearchThreshold:s,getOptions:a,initialState:m,getConditionState:l,variant:f,...y},c)=>{const u=v.useRef(),h=c||u,w=S=>{Jt(S,h)};return n.jsx(Ne,{inputConfig:o,popOverSearchThreshold:s,getOptions:a,variant:f,children:n.jsx("div",{...y,className:B(r,t,{}),role:"main",ref:h,...Pt(Be),children:n.jsx(Mt,{className:`${r}__${f}`,onKeyDown:w,children:n.jsx(Ae,{startConditionLabel:i,conditionBuilderRef:h,getConditionState:l,initialState:m})})})})});z=pe.checkComponentEnabled(z,Be);z.displayName=Be;z.propTypes={className:e.string,getConditionState:e.func.isRequired,getOptions:e.func,initialState:e.shape({groups:e.arrayOf(e.shape({groupSeparateOperator:e.string,groupOperator:e.string,statement:e.string,conditions:e.arrayOf(e.shape({property:e.string,operator:e.string,value:e.string}))}))}),inputConfig:e.shape({properties:e.arrayOf(e.shape({id:e.string,label:e.string,icon:e.oneOfType([e.func,e.object]),type:e.oneOf(["text","number","date","option","time"]),config:e.shape({options:e.arrayOf(e.shape({id:e.string,label:e.string,icon:e.oneOfType([e.func,e.object])})),includeSearch:e.bool})}))}).isRequired,popOverSearchThreshold:e.number.isRequired,startConditionLabel:e.string.isRequired,variant:e.string.isRequired};z.__docgenInfo={description:"TODO: A description of the component.",methods:[],displayName:"ConditionBuilder",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},getConditionState:{description:"",type:{name:"func"},required:!0},getOptions:{description:"",type:{name:"func"},required:!1},initialState:{description:"",type:{name:"shape",value:{groups:{name:"arrayOf",value:{name:"shape",value:{groupSeparateOperator:{name:"string",required:!1},groupOperator:{name:"string",required:!1},statement:{name:"string",required:!1},conditions:{name:"arrayOf",value:{name:"shape",value:{property:{name:"string",required:!1},operator:{name:"string",required:!1},value:{name:"string",required:!1}}},required:!1}}},required:!1}}},required:!1},inputConfig:{description:"This is a mandatory prop that defines the input to the condition builder.",type:{name:"shape",value:{properties:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'option'",computed:!1},{value:"'time'",computed:!1}],required:!1},config:{name:"shape",value:{options:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1}}},required:!1},includeSearch:{name:"bool",required:!1}},required:!1}}},required:!1}}},required:!0},popOverSearchThreshold:{description:"Provide an mandatory numeric value that will be used to enable search option in the popovers with list.",type:{name:"number"},required:!0},startConditionLabel:{description:"Provide a label to the button that starts condition builder",type:{name:"string"},required:!0},variant:{description:"Provide the condition builder variant: sentence/ tree",type:{name:"string"},required:!0}}};function Ie(t){const o={a:"a",h1:"h1",h2:"h2",li:"li",ul:"ul",...tt(),...t.components};return n.jsxs(n.Fragment,{children:[n.jsx(o.h1,{id:"conditionbuilder",children:"ConditionBuilder"}),`
`,n.jsx(o.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,n.jsxs(o.ul,{children:[`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#overview",children:"Overview"})}),`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#example-usage",children:"Example usage"})}),`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,n.jsx(o.h2,{id:"overview",children:"Overview"}),`
`,`
`,n.jsx(o.h2,{id:"example-usage",children:"Example usage"}),`
`,`
`,n.jsx(St,{children:n.jsx(qt,{of:E})}),`
`,n.jsx(o.h2,{id:"code-sample",children:"Code sample"}),`
`,`
`,n.jsx(o.h2,{id:"component-api",children:"Component API"}),`
`,n.jsx(Nt,{})]})}function rn(t={}){const{wrapper:o}={...tt(),...t.components};return o?n.jsx(o,{...t,children:n.jsx(Ie,{...t})}):Ie(t)}const an="",fe={properties:[{id:"continent",label:"Continent",icon:nt,type:"option",config:{options:[{label:"Africa",id:"Africa"},{label:"Antarctica",id:"Antarctica"},{label:"Asia",id:"Asia"},{label:"Australia",id:"Australia"},{label:"Europe",id:"Europe"}]}},{id:"region",label:"Region",icon:ot,type:"option",config:{options:[{label:"Afghanistan",id:"AF",icon:F},{label:"Albania",id:"AL",icon:F},{label:"Algeria",id:"AG",icon:F},{label:"Andorra",id:"AN",icon:F},{label:"India",id:"India",icon:F}],includeSearch:!0}},{id:"color",label:"Color",icon:it,type:"option",config:{options:[{label:"black",id:"black"},{label:"silver",id:"silver"},{label:"gray",id:"gray"},{label:"white",id:"white"},{label:"maroon",id:"maroon"},{label:"red",id:"red"},{label:"purple",id:"purple"},{label:"fuchsia",id:"fuchsia"},{label:"green",id:"green"},{label:"lime",id:"lime"},{label:"olive",id:"olive"},{label:"yellow",id:"yellow"},{label:"navy",id:"navy"},{label:"blue",id:"blue"},{label:"teal",id:"teal"},{label:"aqua",id:"aqua"}]}},{id:"id",label:"ID",icon:st,type:"text",config:{}},{id:"price",label:"Price",icon:rt,type:"number",config:{min:0,step:1,unit:"Dollars"}},{id:"date",label:"Date",icon:de,type:"date",config:{}},{id:"time",label:"Time",icon:de,type:"time",config:{timeZones:["IST","CET","UTC","LOCAL"]}},{id:"delivery",label:"Delivery",icon:lt,type:"option",config:{options:[{label:"Processing",id:"Processing"},{label:"Preparing for dispatch",id:"Preparing for dispatch"},{label:"Dispatched",id:"Dispatched"},{label:"In delivery",id:"In delivery"},{label:"Delivered",id:"Delivered"}]}},{id:"season",label:"Season",icon:dt,type:"option",config:{options:[{label:"Winter",id:"Winter"},{label:"Spring",id:"Spring"},{label:"Summer",id:"Summer"},{label:"Fall",id:"Fall"}]}},{id:"product",label:"Product",icon:at,type:"text",config:{}}]},sn={properties:[{id:"continent",label:"Continent",icon:nt,type:"option",config:{}},{id:"region",label:"Region",icon:ot,type:"option",config:{includeSearch:!0}},{id:"color",label:"Color",icon:it,type:"option",config:{}},{id:"id",label:"ID",icon:st,type:"text",config:{}},{id:"price",label:"Price",icon:rt,type:"number",config:{min:0,step:1,unit:"Dollars"}},{id:"date",label:"Date",icon:de,type:"date",config:{}},{id:"time",label:"Time",icon:de,type:"time",config:{timeZones:["IST","CET","UTC","LOCAL"]}},{id:"product",label:"Product",icon:at,type:"text",config:{}},{id:"delivery",label:"Delivery",icon:lt,type:"option",config:{options:[{label:"Processing",id:"Processing"},{label:"Preparing for dispatch",id:"Preparing for dispatch"},{label:"Dispatched",id:"Dispatched"},{label:"In delivery",id:"In delivery"},{label:"Delivered",id:"Delivered"}]}},{id:"season",label:"Season",icon:dt,type:"option",config:{options:[{label:"Winter",id:"Winter"},{label:"Spring",id:"Spring"},{label:"Summer",id:"Summer"},{label:"Fall",id:"Fall"}]}}]},ln={operator:"or",groups:[{groupSeparateOperator:"and",groupOperator:"and",statement:"if",id:x(),conditions:[{property:"region",operator:"is",value:"IL",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{groupSeparateOperator:"and",groupOperator:"and",statement:"if",id:x(),conditions:[{property:"region",operator:"is",value:"IL",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{groupSeparateOperator:"and",groupOperator:"and",statement:"if",id:x(),conditions:[{property:"region",operator:"is",value:"IL",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()}]}]}]},{groupSeparateOperator:"and",groupOperator:"and",statement:"if",id:x(),conditions:[{property:"continent",operator:"is",value:"Asia",id:x()},{property:"region",operator:"is",value:"India",id:x()},{property:"price",operator:"is",value:"20",id:x()}]}]},dn={groups:[{groupSeparateOperator:"and",groupOperator:"and",statement:"if",id:x(),conditions:[{property:"region",operator:"is",value:"IL",id:x()},{property:"delivery",operator:"is",value:"processing",id:x()},{property:"price",operator:"is",value:"3",id:x()}]}]},ro={title:"IBM Products/Components/ConditionBuilder",component:z,tags:["autodocs"],parameters:{layout:"fullscreen",styles:an,docs:{page:rn}}},cn=()=>[{label:"Africa",id:"Africa"},{label:"Antarctica",id:"Antarctica"},{label:"Asia",id:"Asia"},{label:"Australia",id:"Australia"},{label:"Europe",id:"Europe"}],pn=()=>[{label:"Afghanistan",id:"AF",icon:F},{label:"Albania",id:"AL",icon:F},{label:"Algeria",id:"AG",icon:F},{label:"Andorra",id:"AN",icon:F}],un=()=>[{label:"black",id:"black"},{label:"silver",id:"silver"},{label:"gray",id:"gray"},{label:"white",id:"white"},{label:"maroon",id:"maroon"},{label:"red",id:"red"},{label:"purple",id:"purple"},{label:"fuchsia",id:"fuchsia"},{label:"green",id:"green"},{label:"lime",id:"lime"},{label:"olive",id:"olive"},{label:"yellow",id:"yellow"},{label:"navy",id:"navy"},{label:"blue",id:"blue"},{label:"teal",id:"teal"},{label:"aqua",id:"aqua"}],mn=async({property:t})=>{switch(t){case"continent":return new Promise(o=>{setTimeout(()=>{o(cn())},2e3)});case"region":return new Promise(o=>{setTimeout(()=>{o(pn())},2e3)});case"color":return new Promise(o=>{setTimeout(()=>{o(un())},2e3)});default:return[]}},fn={startConditionLabel:"Add Condition",popOverSearchThreshold:4,getConditionState:t=>{}},ie=t=>{const o=v.useRef();return v.useState(!1),n.jsx(z,{...t,ref:o,...fn})},E=ie.bind({});E.storyName="Condition Builder";E.args={inputConfig:fe,variant:"sentence"};const U=ie.bind({});U.storyName="With dynamic options";U.args={inputConfig:sn,getOptions:mn,variant:"sentence"};const X=ie.bind({});X.storyName="With initial state";X.args={initialState:dn,inputConfig:fe,variant:"sentence"};const Y=ie.bind({});Y.storyName="Condition Builder(Tree)";Y.args={inputConfig:fe,variant:"tree"};const J=ie.bind({});J.storyName="With initial state(Tree)";J.args={initialState:ln,inputConfig:fe,variant:"tree"};var Re,He,Fe,Le,Ee;E.parameters={...E.parameters,docs:{...(Re=E.parameters)==null?void 0:Re.docs,source:{originalSource:`args => {
  const ref = useRef();
  const [open, setOpen] = useState(false);
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Fe=(He=E.parameters)==null?void 0:He.docs)==null?void 0:Fe.source},description:{story:`TODO: Declare one or more stories, generally one per design scenario.
NB no need for a 'Playground' because all stories have all controls anyway.`,...(Ee=(Le=E.parameters)==null?void 0:Le.docs)==null?void 0:Ee.description}}};var Ge,Me,Ve;U.parameters={...U.parameters,docs:{...(Ge=U.parameters)==null?void 0:Ge.docs,source:{originalSource:`args => {
  const ref = useRef();
  const [open, setOpen] = useState(false);
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Ve=(Me=U.parameters)==null?void 0:Me.docs)==null?void 0:Ve.source}}};var ze,We,Ke;X.parameters={...X.parameters,docs:{...(ze=X.parameters)==null?void 0:ze.docs,source:{originalSource:`args => {
  const ref = useRef();
  const [open, setOpen] = useState(false);
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Ke=(We=X.parameters)==null?void 0:We.docs)==null?void 0:Ke.source}}};var Ze,Ue,Xe;Y.parameters={...Y.parameters,docs:{...(Ze=Y.parameters)==null?void 0:Ze.docs,source:{originalSource:`args => {
  const ref = useRef();
  const [open, setOpen] = useState(false);
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Xe=(Ue=Y.parameters)==null?void 0:Ue.docs)==null?void 0:Xe.source}}};var Ye,Je,Qe;J.parameters={...J.parameters,docs:{...(Ye=J.parameters)==null?void 0:Ye.docs,source:{originalSource:`args => {
  const ref = useRef();
  const [open, setOpen] = useState(false);
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Qe=(Je=J.parameters)==null?void 0:Je.docs)==null?void 0:Qe.source}}};const ao=["conditionBuilder","conditionBuilderDynamicOptions","conditionBuilderWithInitialState","conditionBuilderTree","conditionBuilderWithInitialStateTree"];export{ao as __namedExportsOrder,E as conditionBuilder,U as conditionBuilderDynamicOptions,Y as conditionBuilderTree,X as conditionBuilderWithInitialState,J as conditionBuilderWithInitialStateTree,ro as default};
